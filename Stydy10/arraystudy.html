<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">
	<title>Study10</title>
	<link crossorigin="anonymous" media="all" rel="stylesheet" href="css/arraystudy.css">
	<link crossorigin="anonymous" media="all" rel="stylesheet" href="css/reset.css">
	<script type="text/javascript">

		window.onload = function() {

			let _cartlisWrap = document.getElementById('cartWrap')
			let chklist = document.getElementById('itemListWrap')
			let _HTML = ''
			

			let martitem = new Array(
				{name:'바나나', price: 1000},
				{name:'딸기', price: 2000},
				{name:'사과', price: 3000},
				{name:'오렌지', price: 4000},
			)
			
		
			// 반복문을 통해 전체 배열 출력, 체크박스와 첫번째 인덱스만 가지고옴
			for(let i=0; i < martitem.length; i++ ){
				_HTML += '<ul id="itemListWrap">';
				_HTML += '<li class="item">';
					_HTML += '<input class="name" id="martitemlist'+(i+1)+'" type="checkbox" data-price="'+ martitem[i].price +'" name="mart" value="'+martitem[i].name+'" />';
					_HTML += '<label for="martitemlist'+(i+1)+'">'+martitem[i].name+'</label>';
					_HTML += '<input class="counts" id="count'+i+'" disabled value="0" type="number" name="count">';
				_HTML += '</li></ul>'
				
			}
			
			//innerHTML을 통해 생성
			_cartlisWrap.innerHTML = _HTML

			let _martItem = document.querySelectorAll('li.item')

			for( var i=0; _martItem.length > i; i++ ){

				let _cheked = _martItem[i].querySelector('.name')

				_cheked.addEventListener('change', function(event){

					let _target = event.currentTarget
					let _target_data = _target.dataset.price;
					let _target_name = _target.value;
					let _target_count = _target.parentNode.querySelector('.counts')
					let _carBt = document.getElementById('cartbt')
					let _itemcart = document.getElementById('itemWrap')

					if(_target.checked){
						
						_target_count.removeAttribute('disabled')
						_target_count.value = 1
						_carBt.removeAttribute('disabled')
						
						
					}else{
						_target_count.setAttribute('disabled', 'disabled')
						_target_count.value = 0
						_carBt.setAttribute('disabled', 'disabled')
					}


					_carBt.addEventListener('click', function(){

						if(_target.checked){
							_itemcart.style.display = 'bo'

						}else{

						}

						_itemcart.innerHTML += _target_name + _target_data
						
					})
			
				})

			}
			
			
			let _cart = document.getElementById('cartbt')
			// let test = document.getElementById('cartbt')
			// 		console.log(_cart);

			// 장바구니 담기
			_cart.addEventListener('click', function(){

				

				
			})

		}

	</script>
</head>
<body>
	<div id="container">

		<h1>Cart 만들기</h1>

		<button id="cartbt" disabled >장바구니 담기</button>
		<div id="itemWrap">
		</div>
		<div id="cartWrap">
		</div>
	</div>


	
<!-- <script type="text/javascript">


1. 장바구니 담기
2. 장바구니 뷰 ()
3. 구매하기 
   > 최종 구매한 것에 대한 배열을 새로 만들고, 
	
</script> -->
</body>
</html>